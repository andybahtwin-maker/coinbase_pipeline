<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Arbitrage Control Room</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/recharts/umd/Recharts.min.js"></script>
    <script src="https://unpkg.com/dayjs@1/dayjs.min.js"></script>
    <script src="https://unpkg.com/luxon@3/build/global/luxon.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      :root { --green:#10b981; --blue:#3b82f6; --ink:#0f172a; --card:#0b1220; --muted:#94a3b8; }
      body { background: radial-gradient(1200px 600px at 70% -10%, #0b1220 0%, #060a12 40%, #04070d 100%); color: #e5edf6; font-feature-settings: "tnum" on, "lnum" on; }
      .card { background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)); border:1px solid rgba(255,255,255,0.08); box-shadow: 0 10px 30px rgba(0,0,0,0.35); }
      .grid-fit { grid-template-columns: repeat(auto-fill, minmax(320px,1fr)); }
      .num { font-variant-numeric: tabular-nums; }
      .pos { color: var(--green); }
      .neg, .fee { color: var(--blue); }
      .tag { border:1px solid rgba(255,255,255,0.12); border-radius:9999px; padding:.15rem .5rem; font-size:.75rem; color:#a3b8d1 }
      .spark path { opacity:.9 }
    </style>
  </head>
  <body class="min-h-screen">
    <div id="root" class="p-6 max-w-7xl mx-auto">
      <header class="mb-6 flex items-center justify-between">
        <div>
          <h1 class="text-2xl md:text-3xl font-semibold tracking-tight">Arbitrage Control Room</h1>
          <p class="text-sm text-slate-400">SmartDoc‑driven pooled capital • Live spreads • P&L after fees • Risk</p>
        </div>
        <div class="flex items-center gap-2">
          <span id="updatedAt" class="tag">loading…</span>
          <button id="refreshBtn" class="tag hover:bg-white/5">Refresh</button>
        </div>
      </header>

      <section id="kpis" class="grid grid-fit gap-4 mb-6"></section>

      <section class="grid md:grid-cols-12 gap-4">
        <div class="md:col-span-8 card rounded-2xl p-4">
          <h3 class="text-sm text-slate-300 mb-2">Spread & Net P&L over time</h3>
          <div id="chartSpread" class="h-[320px]"></div>
        </div>
        <div class="md:col-span-4 card rounded-2xl p-4">
          <h3 class="text-sm text-slate-300 mb-2">Fees & Slippage (per trade)</h3>
          <div id="chartFees" class="h-[320px]"></div>
        </div>

        <div class="md:col-span-6 card rounded-2xl p-4">
          <h3 class="text-sm text-slate-300 mb-2">Cumulative P&L after fees</h3>
          <div id="chartCumPnL" class="h-[280px]"></div>
        </div>
        <div class="md:col-span-6 card rounded-2xl p-4">
          <h3 class="text-sm text-slate-300 mb-2">Rolling Volatility & Drawdown</h3>
          <div id="chartRisk" class="h-[280px]"></div>
        </div>

        <div class="md:col-span-12 card rounded-2xl p-4">
          <h3 class="text-sm text-slate-300 mb-3">Recent Trades</h3>
          <div id="trades" class="overflow-x-auto"></div>
        </div>
      </section>
    </div>

    <script type="module" src="./app.js"></script>
  </body>
</html>
