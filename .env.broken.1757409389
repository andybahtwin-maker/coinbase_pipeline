
hdZddlZddlZddlZddlmZddlZddlZd
dZejdZ
GddZejjGdd	Zy)zTest the kernels service API.N)TemporaryDirectoryc|j}t|tjjr$||j
k7ry|duxs|t|k(Stt|tjjt|tjjgrS||jk7ry|r@tj|jjjd}||k7ryyy)z7Check that the error matches the expected output error.FNmessageT)value
isinstancetornadoweb	HTTPErrorstatus_codestrany
httpclientHTTPClientErrorcodejsonloadsresponsebodydecode)errorexpected_codeexpected_messageers     X/home/andhe001/venvs/cad/lib/python3.12/site-packages/jupyterlab/tests/test_build_api.pyexpected_http_errorrsA!W[[**+AMM)4'E+;s1v+EE	q',,<<=q',,667	

AFF"jj!7!7!9:9EG7*
ct||SN)BuildAPITester)jp_serverapplabapp
fetch_longs   rbuild_api_testerr#%s&*--rc4eZdZdZdZdZd	dZdZdZdZ	y)
rz#Wrapper for build REST API requestszlab/api/buildc ||_||_yr)r!fetch)selfr!r"s   r__init__zBuildAPITester.__init__/s
rNc`K|j|j|z||d{S7w)N)methodr)r&url)r'verbpathrs    r_reqzBuildAPITester._req3s)ZZ44ZHHHHs%.,.cBK|jddd{S7w)NGETr.r's r	getStatuszBuildAPITester.getStatus6sYYub))))cjK|jddtjid{S7w)NPOSTr1)r.rdumpsr3s rbuildzBuildAPITester.build9s'YYvr4::b>::::s*313cBK|jddd{S7w)NDELETEr1r2r3s rclearzBuildAPITester.clear<sYYx,,,,r5r)
__name__
__module____qualname____doc__r+r(r.r4r9r<rrrr*s$-
C I*;-rrceZdZdZdZdZejje	jdk(ddZejje	jdk(ddZy	)
TestBuildAPIcdt}|jj||jSr)rtempdirsappendname)r'tds  rtempdirzTestBuildAPI.tempdirBs%!R wwrc<g_jfd}y)NcHjD]}|jyr)rEcleanup)dr's rcleanup_tempdirsz,TestBuildAPI.setUp.<locals>.cleanup_tempdirsMs]]		r)rE
addCleanup)r'rNs` rsetUpzTestBuildAPI.setUpGs$
	
	rcK|jd{}|jj}tj|}d|vsJd|vsJy7@w)z3Make sure there are no kernels running at the startNstatusr)r4rrrr)r'r#rresresps     rtest_get_statuszTestBuildAPI.test_get_statusTsT",,..ffmmozz#4D   	/sAAAAntzCurrently failing on windows)reasoncbK|jd{}|jdk(sJy7w)N)r9r)r'r#rSs   r
test_buildzTestBuildAPI.test_build^s,"((**vv}}+s/-/cKtjtjj5}|jd{}|jj}dddtdsJtj}tj|j|	|jd{}|jj}tj|}|ddk(rnQ|jd{}|j dk(sJy7#1swYxYw7u7&w)Ni)looprRbuilding)pytestraisesrrrr<rrrasyncioget_event_loopensure_futurer9r4rrr)r'r#rrSrTr]rUs       r
test_clearzTestBuildAPI.test_cleares]]7--==>	"!&,,..A&&--/C	"#1c***%%'.446TB&0022A&&--/C::c?DH~+#((**vv}}/	"	"3+sN.ED0D.D0#A#ED<AED>E.D00D95E>EN)r=r>r?rIrPrVr`markskipifosrGr[rerArrrCrC@su
	![[40NOP[[40NOPrrCr)r@rbrrhtempfilerr`rrfixturer#rrfslowrCrArr<module>rlsf$	',..--,666rSMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=andybahtwin@gmail.com
SMTP_PASSWORD=jyksatijuzyqyaxu
EMAIL_FROM=andybahtwin@gmail.com
EMAIL_TO=andybahtwin@gmail.com
EMAIL_SUBJECT=Your job feed (wide)
SMTP_USER=andybahtwin@gmail.com
SMTP_PASS=jyksatijuzyqyaxu
